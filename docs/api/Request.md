---
id: request
title: Request
---
<a name="Request"></a>

Represents a URL to be crawled, optionally including HTTP method, headers, payload and other metadata.
The `Request` object also stores information about errors that occurred during processing of the request.

Each `Request` instance has the `uniqueKey` property, which can be either specified
manually in the constructor or generated automatically from the URL. Two requests with the same `uniqueKey`
are considered as pointing to the same web resource. This behavior applies to all Apify SDK classes,
such as [`RequestList`](requestlist), [`RequestQueue`](requestqueue) or [`PuppeteerCrawler`](puppeteercrawler).

Example use:

```javascript
const request = new Apify.Request({
    url: 'http://www.example.com',
    headers: { Accept: 'application/json' },
});

...

request.userData.foo = 'bar';
request.pushErrorMessage(new Error('Request failed!'));

...

const foo = request.userData.foo;
```

**Properties**
<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td><td><code>String</code></td>
</tr>
<tr>
<td colspan="3"><p>Request ID</p>
</td></tr><tr>
<td><code>url</code></td><td><code>String</code></td>
</tr>
<tr>
<td colspan="3"><p>URL of the web page to crawl.</p>
</td></tr><tr>
<td><code>uniqueKey</code></td><td><code>String</code></td>
</tr>
<tr>
<td colspan="3"><p>A unique key identifying the request.
  Two requests with the same <code>uniqueKey</code> are considered as pointing to the same URL.</p>
</td></tr><tr>
<td><code>method</code></td><td><code>String</code></td>
</tr>
<tr>
<td colspan="3"><p>HTTP method, e.g. <code>GET</code> or <code>POST</code>.</p>
</td></tr><tr>
<td><code>payload</code></td><td><code>String</code></td>
</tr>
<tr>
<td colspan="3"><p>HTTP request payload, e.g. for POST requests.</p>
</td></tr><tr>
<td><code>retryCount</code></td><td><code>Number</code></td>
</tr>
<tr>
<td colspan="3"><p>Indicates the number of times the crawling of the request has been retried on error.</p>
</td></tr><tr>
<td><code>errorMessages</code></td><td><code>Array&lt;String&gt;</code></td>
</tr>
<tr>
<td colspan="3"><p>An array of error messages from request processing.</p>
</td></tr><tr>
<td><code>headers</code></td><td><code>Object</code></td>
</tr>
<tr>
<td colspan="3"><p>Object with HTTP headers. Key is header name, value is the value.</p>
</td></tr><tr>
<td><code>userData</code></td><td><code>Object</code></td>
</tr>
<tr>
<td colspan="3"><p>Custom user data assigned to the request.</p>
</td></tr><tr>
<td><code>ignoreErrors</code></td><td><code>Boolean</code></td>
</tr>
<tr>
<td colspan="3"><p>If <code>true</code> then errors in processing of this request are ignored.
  For example, the request won&#39;t be retried in a case of an error.</p>
</td></tr><tr>
<td><code>handledAt</code></td><td><code>Date</code></td>
</tr>
<tr>
<td colspan="3"><p>Indicates the time when the request has been processed.
  Is <code>null</code> if the request has not been crawled yet.</p>
</td></tr></tbody>
</table>

* [Request](request)
    * [`new Request(options)`](#new_Request_new)
    * [`.pushErrorMessage(errorOrMessage)`](#Request+pushErrorMessage)

<a name="new_Request_new"></a>

## `new Request(options)`
<table>
<thead>
<tr>
<th>Param</th><th>Type</th><th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>options</code></td><td><code>object</code></td><td></td>
</tr>
<tr>
<td colspan="3"><p>All <code>Request</code> parameters are passed
  via an options object with the following keys:</p>
</td></tr><tr>
<td><code>options.url</code></td><td><code>String</code></td><td></td>
</tr>
<tr>
<td colspan="3"><p>URL of the web page to crawl.</p>
</td></tr><tr>
<td><code>[options.uniqueKey]</code></td><td><code>String</code></td><td></td>
</tr>
<tr>
<td colspan="3"><p>A unique key identifying the request.
Two requests with the same <code>uniqueKey</code> are considered as pointing to the same URL.</p>
<p>If <code>uniqueKey</code> is not provided, then it is automatically generated by normalizing the URL.
For example, the URL of <code>HTTP://www.EXAMPLE.com/something/</code> will produce the <code>uniqueKey</code>
of <code>http://www.example.com/something</code>.</p>
<p>The <code>keepUrlFragment</code> option determines whether URL hash fragment is included in the <code>uniqueKey</code> or not.
Beware that the HTTP method and payload are not included in the <code>uniqueKey</code>,
so requests to the same URL but with different HTTP methods or different POST payloads
are all considered equal and will be deduplicated by <a href="requestlist"><code>RequestList</code></a> and <a href="requestqueue"><code>RequestQueue</code></a>.</p>
<p>Pass an arbitrary non-empty text value to the <code>uniqueKey</code> property
to override the default behavior and specify which URLs shall be considered equal.</p>
</td></tr><tr>
<td><code>[options.method]</code></td><td><code>String</code></td><td><code>&#x27;GET&#x27;</code></td>
</tr>
<tr>
<td colspan="3"></td></tr><tr>
<td><code>[options.payload]</code></td><td><code>String</code> | <code>Buffer</code></td><td></td>
</tr>
<tr>
<td colspan="3"><p>HTTP request payload, e.g. for POST requests.</p>
</td></tr><tr>
<td><code>[options.headers]</code></td><td><code>Object</code></td><td><code>{}</code></td>
</tr>
<tr>
<td colspan="3"><p>HTTP headers in the following format:</p>
<pre><code>  {
      Accept: &#39;text/html&#39;,
      &#39;Content-Type&#39;: &#39;application/json&#39;
  }
</code></pre></td></tr><tr>
<td><code>[options.userData]</code></td><td><code>Object</code></td><td><code>{}</code></td>
</tr>
<tr>
<td colspan="3"><p>Custom user data assigned to the request. Use this to save any request related data to the
  request&#39;s scope, keeping them accessible on retries, failures etc.</p>
</td></tr><tr>
<td><code>[options.keepUrlFragment]</code></td><td><code>Boolean</code></td><td><code>false</code></td>
</tr>
<tr>
<td colspan="3"><p>If <code>false</code> then the hash part of a URL is removed when computing the <code>uniqueKey</code> property.
  For example, this causes the <code>http://www.example.com#foo</code> and <code>http://www.example.com#bar</code> URLs
  to have the same <code>uniqueKey</code> of <code>http://www.example.com</code> and thus the URLs are considered equal.
  Note that this option only has an effect if <code>uniqueKey</code> is not set.</p>
</td></tr><tr>
<td><code>[options.ignoreErrors]</code></td><td><code>String</code></td><td><code>false</code></td>
</tr>
<tr>
<td colspan="3"><p>If <code>true</code> then errors in processing of this request will be ignored.
  For example, the request won&#39;t be retried in a case of an error.</p>
</td></tr></tbody>
</table>
<a name="Request+pushErrorMessage"></a>

## `request.pushErrorMessage(errorOrMessage)`
Stores information about an error that occurred during processing of this request.

<table>
<thead>
<tr>
<th>Param</th><th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>errorOrMessage</code></td><td><code>Error</code> | <code>String</code></td>
</tr>
<tr>
<td colspan="3"><p>Error object or error message to be stored in the request.</p>
</td></tr></tbody>
</table>
